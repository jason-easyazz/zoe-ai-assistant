        .voice-settings select {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 14px;
            outline: none;
            margin-bottom: 10px;
        }

        .integration-status, .service-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .integration-item, .service-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .integration-item:hover, .service-item:hover {
            background: rgba(255, 255, 255, 0.8);
            transform: translateX(5px);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
        }

        .status-dot.online {
            background: #4CAF50;
            box-shadow: 0 0 8px rgba(76, 175, 80, 0.4);
        }

        .status-dot.offline {
            background: #f44336;
            box-shadow: 0 0 8px rgba(244, 67, 54, 0.4);
        }

        .data-actions, .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        /* System Styles */
        .system-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            font-size: 32px;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(123, 97, 255, 0.1);
            border-radius: 50%;
        }

        .stat-content {
            flex: 1;
        }

        .stat-title {
            font-size: 14px;
            color: #666;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 18px;
            color: #333;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .stat-detail {
            font-size: 12px;
            color: #999;
        }

        .service-status {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .service-status h3 {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .system-actions {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
        }

        .system-actions h3 {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Mobile Responsive for Panels */
        @media (max-width: 768px) {
            .panels-container {
                padding: 100px 20px 40px;
            }

            .panel {
                padding: 20px;
            }

            .panel-header h2 {
                font-size: 24px;
            }

            .mood-options {
                gap: 10px;
            }

            .mood-option {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }

            .task-options {
                flex-direction: column;
                gap: 10px;
            }

            .task-options select, .task-options input {
                width: 100%;
            }

            .system-stats {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .data-actions, .action-grid {
                grid-template-columns: 1fr;
            }

            .personality-sliders {
                gap: 20px;
            }

            .event-details {
                grid-template-columns: 1fr;
                gap: 10px;
            }
        }
        .panels-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            padding: 100px 40px 60px;
            overflow-y: auto;
        }

        .panels-container.active {
            display: block !important;
        }

        .panel {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.05);
        }

        .panel.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .panel-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        .panel-header h2 {
            font-size: 28px;
            font-weight: 300;
            color: #333;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .panel-header p {
            font-size: 16px;
            color: #666;
            font-weight: 300;
        }

        /* Journal Styles */
        .journal-entry-form {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .mood-selector {
            margin-bottom: 20px;
        }

        .mood-selector label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin-bottom: 10px;
        }

        .mood-options {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .mood-option {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .mood-option:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 1);
        }

        .mood-option.selected {
            border-color: #7B61FF;
            background: rgba(123, 97, 255, 0.1);
            transform: scale(1.1);
        }

        .entry-input textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
            resize: vertical;
            outline: none;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .entry-input textarea:focus {
            background: rgba(255, 255, 255, 1);
            box-shadow: 0 0 0 2px rgba(123, 97, 255, 0.3);
        }

        .journal-actions {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-top: 20px;
        }

        .journal-actions input {
            flex: 1;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            padding: 12px 15px;
            font-size: 14px;
            outline: none;
        }

        .save-btn, .add-btn, .test-btn, .action-btn {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .save-btn:hover, .add-btn:hover, .test-btn:hover, .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(123, 97, 255, 0.3);
        }

        .journal-history h3 {
            font-size: 20px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
        }

        .entry-item {
            background: rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .entry-item:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
        }

        .entry-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .entry-date {
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }

        .entry-mood {
            font-size: 20px;
        }

        .entry-text {
            font-size: 16px;
            line-height: 1.6;
            color: #333;
            margin-bottom: 10px;
        }

        .entry-tags {
            font-size: 12px;
            color: #7B61FF;
            font-weight: 500;
        }

        /* Tasks Styles */
        .task-form {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .task-form input[type="text"] {
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            padding: 15px 20px;
            font-size: 16px;
            margin-bottom: 15px;
            outline: none;
        }

        .task-options {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .task-options select, .task-options input[type="date"] {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 14px;
            outline: none;
        }

        .task-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .filter-btn {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .filter-btn.active, .filter-btn:hover {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
            border-color: transparent;
        }

        .all-tasks {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 20px;
        }

        .task-item-detailed {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .task-item-detailed:hover {
            background: rgba(255, 255, 255, 0.6);
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
            margin-bottom: 4px;
        }

        .task-title.completed {
            text-decoration: line-through;
            color: #999;
        }

        .task-meta {
            font-size: 12px;
            color: #666;
        }

        /* Calendar Styles */
        .calendar-view {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-header h3 {
            font-size: 20px;
            font-weight: 500;
            color: #333;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 18px;
            color: #666;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(123, 97, 255, 0.2);
            color: #7B61FF;
            transform: scale(1.05);
        }

        .mini-calendar {
            max-width: 400px;
            margin: 0 auto;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 2px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 12px;
            padding: 10px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            min-height: 35px;
        }

        .calendar-day:hover {
            background: rgba(123, 97, 255, 0.1);
            transform: scale(1.05);
        }

        .calendar-day.today {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
        }

        .calendar-day.has-event {
            background: rgba(123, 97, 255, 0.2);
            color: #7B61FF;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        .event-form {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
        }

        .event-form h3 {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }

        .event-form input, .event-form textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            padding: 12px 15px;
            font-size: 14px;
            margin-bottom: 15px;
            outline: none;
            font-family: inherit;
        }

        .event-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Settings Styles */
        .settings-section {
            background: rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .settings-section h3 {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 10px;
        }

        .settings-section p {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }

        .personality-sliders {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .slider-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .slider-group label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(123, 97, 255, 0.3);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #666;
        }

        .voice-settings {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .voice-settings label {
            font-size: 14px;
            font-weight: 500;
            color: #333;
            margin-bottom: 5px;
        }

        .voice-settings select {
            background: rgba(255, 255, 255, 0<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoe - Your AI Best Friend</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f1f3f6 100%);
            overflow: hidden;
            height: 100vh;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        /* Orb Mode - Default State */
        .orb-mode {
            position: fixed;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, #fafbfc 0%, #f1f3f6 100%);
            z-index: 1000;
            opacity: 1;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .orb-mode.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Fluid Orb Animation */
        .fluid-orb {
            position: relative;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            cursor: pointer;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(123, 97, 255, 0.3);
            transition: all 0.3s ease;
        }

        .fluid-orb:hover {
            transform: scale(1.05);
            box-shadow: 0 25px 80px rgba(123, 97, 255, 0.4);
        }

        .fluid-layer {
            position: absolute;
            inset: 0;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        }

        .fluid-layer:nth-child(1) {
            animation: breathe 3s ease-in-out infinite;
        }

        .fluid-layer:nth-child(2) {
            animation: breathe 3s ease-in-out infinite 1s;
            opacity: 0.6;
        }

        .fluid-layer:nth-child(3) {
            animation: breathe 3s ease-in-out infinite 2s;
            opacity: 0.3;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.8; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 1; }
        }

        /* Animation States */
        .fluid-orb.listening .fluid-layer {
            animation: pulse 0.6s ease-in-out infinite;
        }

        .fluid-orb.speaking .fluid-layer {
            animation: vibrate 0.3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        @keyframes vibrate {
            0%, 100% { transform: translateX(0) scale(1); }
            25% { transform: translateX(-2px) scale(1.05); }
            75% { transform: translateX(2px) scale(0.95); }
        }

        .orb-hint {
            margin-top: 30px;
            color: #666;
            font-size: 18px;
            font-weight: 300;
            text-align: center;
            opacity: 0.8;
        }

        /* Main Interface */
        .main-interface {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #fafbfc 0%, #f1f3f6 100%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 100;
        }

        .main-interface.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Navigation Bar */
        .nav-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(40px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 110;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .mini-orb {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s ease;
        }

        .mini-orb:hover {
            transform: scale(1.1);
        }

        .mini-orb .fluid-layer {
            animation: breathe 2s ease-in-out infinite;
        }

        .nav-menu {
            display: flex;
            gap: 5px;
        }

        .nav-item {
            padding: 8px 16px;
            color: #666;
            font-size: 14px;
            font-weight: 400;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .nav-item:hover {
            background: rgba(123, 97, 255, 0.1);
            color: #7B61FF;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
        }

        .settings-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: #666;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .settings-btn:hover {
            background: rgba(123, 97, 255, 0.2);
            color: #7B61FF;
            transform: scale(1.05);
        }

        /* Main Container */
        .main-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 100px 40px 60px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* Time Display - Top left under nav */
        .time-display {
            position: fixed;
            top: 80px;
            left: 20px;
            z-index: 90;
        }

        .current-time {
            font-size: 24px;
            font-weight: 300;
            color: #333;
            margin-bottom: 2px;
        }

        .current-date {
            font-size: 14px;
            color: #666;
        }

        /* Weather Widget - Top right under nav, minimalistic */
        .weather-widget {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 90;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .weather-icon {
            font-size: 24px;
        }

        .weather-temp {
            font-size: 24px;
            font-weight: 300;
            color: #333;
        }

        /* Zoe Greeting */
        .zoe-greeting {
            text-align: center;
            margin-bottom: 30px;
        }

        .zoe-greeting h1 {
            font-size: 32px;
            font-weight: 300;
            color: #333;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .zoe-greeting p {
            font-size: 18px;
            color: #666;
            font-weight: 300;
        }

        /* Chat Interface - Compact with expandable overlay */
        .chat-container {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            position: relative;
        }

        .chat-container:hover {
            background: rgba(255, 255, 255, 0.7);
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.08);
        }

        .chat-input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
        }

        .chat-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            font-size: 16px;
            padding: 15px 20px;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.5);
            transition: all 0.2s ease;
        }

        .chat-input:focus {
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 0 2px rgba(123, 97, 255, 0.3);
        }

        .chat-input::placeholder {
            color: #999;
        }

        .voice-btn, .send-btn {
            width: 50px;
            height: 50px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .voice-btn:hover, .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(123, 97, 255, 0.4);
        }

        .voice-btn.active {
            animation: pulse 1s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(123, 97, 255, 0.6);
        }

        /* Quick Actions - Individual shortcuts */
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 12px;
        }

        .quick-action {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 12px 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quick-action:hover {
            background: rgba(123, 97, 255, 0.1);
            transform: translateY(-1px);
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        }

        .quick-action span {
            font-size: 14px;
            color: #333;
            font-weight: 400;
        }

        /* Content Rows */
        .content-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(40px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .content-card:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 15px 60px rgba(0, 0, 0, 0.08);
        }

        .content-card h3 {
            font-size: 18px;
            font-weight: 500;
            color: #333;
            margin-bottom: 15px;
        }

        /* Task Items */
        .task-item, .event-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
        }

        .task-item:last-child, .event-item:last-child {
            border-bottom: none;
        }

        .task-item:hover, .event-item:hover {
            background: rgba(123, 97, 255, 0.05);
            border-radius: 8px;
            padding-left: 15px;
            padding-right: 15px;
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .task-checkbox.checked {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            border-color: #7B61FF;
        }

        .task-checkbox.checked::after {
            content: "‚úì";
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .task-text {
            flex: 1;
            color: #333;
            font-size: 14px;
        }

        .task-text.completed {
            text-decoration: line-through;
            color: #999;
        }

        .event-time {
            color: #7B61FF;
            font-size: 12px;
            font-weight: 500;
        }

        .event-text {
            flex: 1;
            color: #333;
            font-size: 14px;
        }

        /* Chat Overlay - Floating over interface */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(8px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .overlay.active {
            display: flex;
            opacity: 1;
        }

        .chat-window, .shopping-window {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(60px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 20px;
            width: 85%;
            max-width: 450px;
            height: 70%;
            max-height: 600px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            animation: slideUpIn 0.3s ease;
        }

        @keyframes slideUpIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-header, .shopping-header {
            padding: 20px 20px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .chat-title, .shopping-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .mini-orb-chat {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            position: relative;
            overflow: hidden;
        }

        .mini-orb-chat .fluid-layer {
            animation: breathe 2s ease-in-out infinite;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
            font-size: 16px;
        }

        .close-btn:hover {
            background: rgba(255, 0, 0, 0.1);
            color: #ff4444;
        }

        .chat-messages-overlay {
            display: flex;
            flex-direction: column;
            gap: 12px;
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            min-height: 0;
        }

        .chat-input-overlay {
            padding: 15px 20px 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
            flex-shrink: 0;
        }

        .chat-input-overlay .chat-input-group {
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 15px;
            padding: 10px 15px;
            margin-bottom: 0;
        }

        .chat-input-overlay .chat-input {
            background: transparent;
            border: none;
            padding: 8px 0;
            font-size: 14px;
        }

        .chat-input-overlay .voice-btn, .chat-input-overlay .send-btn {
            width: 36px;
            height: 36px;
            font-size: 14px;
        }

        /* Message Bubbles */
        .message {
            margin-bottom: 12px;
            display: flex;
            gap: 10px;
            animation: fadeIn 0.3s ease-out;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.8);
            padding: 12px 16px;
            border-radius: 18px;
            max-width: 70%;
            font-size: 14px;
            line-height: 1.4;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            color: white;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 500;
            flex-shrink: 0;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 18px;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #999;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-10px); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Shopping List Styles */
        .shopping-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            min-height: 0;
        }

        .shopping-input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .shopping-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            padding: 12px 15px;
            font-size: 14px;
            outline: none;
            transition: all 0.2s ease;
        }

        .shopping-input:focus {
            background: rgba(255, 255, 255, 0.9);
            box-shadow: 0 0 0 2px rgba(123, 97, 255, 0.3);
        }

        .add-item-btn {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            border: none;
            border-radius: 12px;
            padding: 12px 16px;
            color: white;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .add-item-btn:hover {
            transform: scale(1.05);
        }

        .shopping-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .shopping-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            transition: all 0.2s ease;
        }

        .shopping-item:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateX(2px);
        }

        .shopping-checkbox {
            width: 18px;
            height: 18px;
            border: 2px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .shopping-checkbox.checked {
            background: linear-gradient(135deg, #7B61FF 0%, #5AE0E0 100%);
            border-color: #7B61FF;
        }

        .shopping-checkbox.checked::after {
            content: "‚úì";
            color: white;
            font-size: 10px;
            font-weight: bold;
        }

        .shopping-text {
            flex: 1;
            color: #333;
            font-size: 14px;
        }

        .shopping-text.completed {
            text-decoration: line-through;
            color: #999;
        }

        .delete-item-btn {
            background: rgba(255, 0, 0, 0.1);
            border: none;
            border-radius: 6px;
            padding: 4px 8px;
            color: #ff4444;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .delete-item-btn:hover {
            background: rgba(255, 0, 0, 0.2);
        }

        /* Status Indicator */
        .status-indicator {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: #666;
            backdrop-filter: blur(10px);
            z-index: 200;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .status-indicator.show {
            opacity: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                padding: 100px 20px 40px;
                gap: 30px;
                justify-content: flex-start;
            }

            .time-display {
                left: 15px;
                top: 80px;
            }

            .current-time {
                font-size: 20px;
            }

            .weather-widget {
                right: 15px;
                top: 80px;
            }

            .weather-icon {
                font-size: 20px;
            }

            .zoe-greeting {
                margin: 40px 0 50px 0;
            }

            .zoe-greeting h1 {
                font-size: 30px;
            }

            .zoe-greeting p {
                font-size: 18px;
            }

            .chat-container {
                padding: 25px 20px;
            }

            .chat-input {
                font-size: 16px;
                padding: 15px 20px;
            }

            .voice-btn, .send-btn {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }

            .content-row {
                grid-template-columns: 1fr;
                gap: 25px;
                margin-top: 40px;
            }

            .quick-actions {
                grid-template-columns: 1fr 1fr;
                gap: 12px;
            }

            .nav-menu {
                display: none;
            }

            .fluid-orb {
                width: 150px;
                height: 150px;
            }
        }
    </style>
</head>
<body>
    <!-- Status Indicator -->
    <div class="status-indicator" id="statusIndicator">Ready</div>

    <!-- Orb Mode (Default State) -->
    <div class="orb-mode" id="orbMode">
        <div class="fluid-orb idle" id="fluidOrb" onclick="enterInterface()">
            <div class="fluid-layer"></div>
            <div class="fluid-layer"></div>
            <div class="fluid-layer"></div>
        </div>
        <div class="orb-hint">Touch to interact or press spacebar to talk</div>
    </div>

    <!-- Main Interface -->
    <div class="main-interface" id="mainInterface">
        <!-- Navigation -->
        <div class="nav-bar">
            <div class="nav-left">
                <div class="mini-orb" onclick="exitToOrb()">
                    <div class="fluid-layer"></div>
                </div>
                <div class="nav-menu">
                    <div class="nav-item active" onclick="switchPanel('dashboard')">Dashboard</div>
                    <div class="nav-item" onclick="switchPanel('tasks')">Tasks</div>
                    <div class="nav-item" onclick="switchPanel('calendar')">Calendar</div>
                    <div class="nav-item" onclick="switchPanel('journal')">Journal</div>
                    <div class="nav-item" onclick="switchPanel('shopping')">Shopping</div>
                </div>
            </div>
            <button class="settings-btn" onclick="switchPanel('settings')" title="Settings">‚öôÔ∏è</button>
        </div>

        <div class="main-container">
            <!-- Time Display - Fixed top left -->
            <div class="time-display">
                <div class="current-time" id="currentTime">Loading...</div>
                <div class="current-date" id="currentDate">Loading...</div>
            </div>

            <!-- Weather Widget - Fixed top right -->
            <div class="weather-widget">
                <div class="weather-icon" id="weatherIcon">üå§Ô∏è</div>
                <div class="weather-temp" id="weatherTemp">23¬∞</div>
            </div>

            <!-- Zoe Greeting -->
            <div class="zoe-greeting">
                <h1>Hi, I'm Zoe ‚ú®</h1>
                <p>How can I help you today?</p>
            </div>

            <!-- Chat Interface - Compact with expandable overlay -->
            <div class="chat-container">
                <div class="chat-input-group">
                    <input type="text" class="chat-input" id="chatInput" placeholder="Type your message..." autofocus onclick="openChatWindow()">
                    <button class="voice-btn" id="voiceBtn" onclick="toggleVoice()" title="Voice input">üé§</button>
                </div>

                <!-- Quick Actions - Individual shortcuts restored -->
                <div class="quick-actions">
                    <div class="quick-action" onclick="quickAction('journal')">
                        <span>üìù Journal</span>
                    </div>
                    <div class="quick-action" onclick="quickAction('event')">
                        <span>üìÖ Event</span>
                    </div>
                    <div class="quick-action" onclick="quickAction('task')">
                        <span>‚úÖ Task</span>
                    </div>
                    <div class="quick-action" onclick="quickAction('shopping')">
                        <span>üõí Shopping</span>
                    </div>
                </div>
            </div>

            <!-- Content Row -->
            <div class="content-row">
                <!-- Tasks -->
                <div class="content-card">
                    <h3>Today's Tasks</h3>
                    <div id="taskList">
                        <div class="task-item">
                            <div class="task-checkbox" onclick="toggleTask(this)"></div>
                            <div class="task-text">Review morning schedule</div>
                        </div>
                        <div class="task-item">
                            <div class="task-checkbox" onclick="toggleTask(this)"></div>
                            <div class="task-text">Deploy Zoe v3.1 interface</div>
                        </div>
                        <div class="task-item">
                            <div class="task-checkbox checked" onclick="toggleTask(this)"></div>
                            <div class="task-text completed">Test new interface</div>
                        </div>
                    </div>
                </div>

                <!-- Events -->
                <div class="content-card">
                    <h3>Upcoming Events</h3>
                    <div id="eventList">
                        <div class="event-item">
                            <div class="event-time">Later</div>
                            <div class="event-text">Backend integration testing</div>
                        </div>
                        <div class="event-item">
                            <div class="event-time">Soon</div>
                            <div class="event-text">Voice services setup</div>
                        </div>
                        <div class="event-item">
                            <div class="event-time">Next</div>
                            <div class="event-text">Home Assistant integration</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel System - All additional pages -->
            <div class="panels-container" id="panelsContainer" style="display: none;">
                
                <!-- Journal Panel -->
                <div class="panel" id="journalPanel">
                    <div class="panel-header">
                        <h2>üìù Personal Journal</h2>
                        <p>Capture your thoughts and feelings</p>
                    </div>
                    
                    <div class="journal-entry-form">
                        <div class="mood-selector">
                            <label>How are you feeling?</label>
                            <div class="mood-options">
                                <div class="mood-option" data-mood="amazing" onclick="selectMood(this)">üòÑ</div>
                                <div class="mood-option" data-mood="good" onclick="selectMood(this)">üòä</div>
                                <div class="mood-option" data-mood="okay" onclick="selectMood(this)">üòê</div>
                                <div class="mood-option" data-mood="stressed" onclick="selectMood(this)">üò∞</div>
                                <div class="mood-option" data-mood="sad" onclick="selectMood(this)">üò¢</div>
                            </div>
                        </div>
                        
                        <div class="entry-input">
                            <textarea id="journalText" placeholder="What's on your mind today? Write about your thoughts, experiences, goals, or anything you'd like to remember..." rows="6"></textarea>
                        </div>
                        
                        <div class="journal-actions">
                            <input type="text" id="journalTags" placeholder="Tags (optional): work, personal, goals...">
                            <button class="save-btn" onclick="saveJournalEntry()">üíæ Save Entry</button>
                        </div>
                    </div>
                    
                    <div class="journal-history">
                        <h3>Recent Entries</h3>
                        <div class="entry-item">
                            <div class="entry-header">
                                <span class="entry-date">Yesterday, 9:15 PM</span>
                                <span class="entry-mood">üòä</span>
                            </div>
                            <p class="entry-text">Feeling productive today! The new routine is really working well. Got through my task list and even had time for a walk.</p>
                            <div class="entry-tags">productivity, routine, wellness</div>
                        </div>
                    </div>
                </div>

                <!-- Tasks Panel -->
                <div class="panel" id="tasksPanel">
                    <div class="panel-header">
                        <h2>‚úÖ Task Management</h2>
                        <p>Stay organized and productive</p>
                    </div>
                    
                    <div class="task-form">
                        <input type="text" id="newTaskTitle" placeholder="What needs to be done?">
                        <div class="task-options">
                            <select id="taskPriority">
                                <option value="low">Low Priority</option>
                                <option value="medium" selected>Medium Priority</option>
                                <option value="high">High Priority</option>
                            </select>
                            <input type="date" id="taskDueDate">
                            <button class="add-btn" onclick="addNewTask()">‚ûï Add Task</button>
                        </div>
                    </div>
                    
                    <div class="task-filters">
                        <button class="filter-btn active" onclick="filterTasks('all')">All</button>
                        <button class="filter-btn" onclick="filterTasks('pending')">Pending</button>
                        <button class="filter-btn" onclick="filterTasks('completed')">Completed</button>
                        <button class="filter-btn" onclick="filterTasks('high')">High Priority</button>
                    </div>
                    
                    <div class="all-tasks" id="allTasksList">
                        <div class="task-item-detailed">
                            <div class="task-checkbox" onclick="toggleTask(this)"></div>
                            <div class="task-content">
                                <div class="task-title">Review project proposal</div>
                                <div class="task-meta">Due: Today, 2:00 PM ‚Ä¢ High Priority</div>
                            </div>
                        </div>
                        <div class="task-item-detailed">
                            <div class="task-checkbox checked" onclick="toggleTask(this)"></div>
                            <div class="task-content">
                                <div class="task-title completed">Morning workout</div>
                                <div class="task-meta">Completed: Today, 7:30 AM</div>
                            </div>
                        </div>
                        <div class="task-item-detailed">
                            <div class="task-checkbox" onclick="toggleTask(this)"></div>
                            <div class="task-content">
                                <div class="task-title">Call doctor for appointment</div>
                                <div class="task-meta">No due date ‚Ä¢ Medium Priority</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Calendar Panel -->
                <div class="panel" id="calendarPanel">
                    <div class="panel-header">
                        <h2>üìÖ Calendar & Events</h2>
                        <p>Manage your schedule</p>
                    </div>
                    
                    <div class="calendar-view">
                        <div class="calendar-header">
                            <button class="nav-btn" onclick="previousMonth()">‚Äπ</button>
                            <h3 id="currentMonth">August 2025</h3>
                            <button class="nav-btn" onclick="nextMonth()">‚Ä∫</button>
                        </div>
                        
                        <div class="mini-calendar">
                            <div class="calendar-grid" id="calendarGrid">
                                <!-- Calendar will be generated by JavaScript -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="event-form">
                        <h3>Add New Event</h3>
                        <input type="text" id="eventTitle" placeholder="Event title">
                        <div class="event-details">
                            <input type="date" id="eventDate">
                            <input type="time" id="eventTime">
                        </div>
                        <textarea id="eventDescription" placeholder="Event description (optional)" rows="3"></textarea>
                        <button class="add-btn" onclick="addNewEvent()">üìÖ Create Event</button>
                    </div>
                </div>

                <!-- Settings Panel -->
                <div class="panel" id="settingsPanel">
                    <div class="panel-header">
                        <h2>‚öôÔ∏è Settings</h2>
                        <p>Customize your Zoe experience</p>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üé≠ Personality</h3>
                        <p>Customize how Zoe responds to you</p>
                        
                        <div class="personality-sliders">
                            <div class="slider-group">
                                <label>Fun Level <span id="funValue">7</span>/10</label>
                                <input type="range" class="slider" id="funSlider" min="1" max="10" value="7" oninput="updatePersonality('fun', this.value)">
                                <div class="slider-labels">
                                    <span>Serious</span>
                                    <span>Playful</span>
                                </div>
                            </div>
                            
                            <div class="slider-group">
                                <label>Empathy Level <span id="empathyValue">8</span>/10</label>
                                <input type="range" class="slider" id="empathySlider" min="1" max="10" value="8" oninput="updatePersonality('empathy', this.value)">
                                <div class="slider-labels">
                                    <span>Direct</span>
                                    <span>Gentle</span>
                                </div>
                            </div>
                            
                            <div class="slider-group">
                                <label>Humor Level <span id="humorValue">6</span>/10</label>
                                <input type="range" class="slider" id="humorSlider" min="1" max="10" value="6" oninput="updatePersonality('humor', this.value)">
                                <div class="slider-labels">
                                    <span>Reserved</span>
                                    <span>Cheeky</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üé§ Voice Settings</h3>
                        <div class="voice-settings">
                            <label>Voice Input</label>
                            <select id="voiceInput">
                                <option value="whisper">Whisper (Local)</option>
                                <option value="browser">Browser API</option>
                                <option value="disabled">Disabled</option>
                            </select>
                            
                            <label>Voice Output</label>
                            <select id="voiceOutput">
                                <option value="coqui">Coqui TTS (Local)</option>
                                <option value="browser">Browser API</option>
                                <option value="disabled">Disabled</option>
                            </select>
                            
                            <button class="test-btn" onclick="testVoice()">üéµ Test Voice</button>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üîó Integrations</h3>
                        <div class="integration-status">
                            <div class="integration-item">
                                <span>Home Assistant</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="integration-item">
                                <span>n8n Automation</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="integration-item">
                                <span>Matrix Messaging</span>
                                <span class="status-dot offline"></span>
                            </div>
                            <div class="integration-item">
                                <span>Weather Service</span>
                                <span class="status-dot online"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>üíæ Data & Privacy</h3>
                        <p>All your data stays on your device</p>
                        <div class="data-actions">
                            <button class="action-btn" onclick="exportData()">üì§ Export Data</button>
                            <button class="action-btn" onclick="backupData()">üíæ Backup</button>
                            <button class="action-btn" onclick="clearData()">üóëÔ∏è Clear All Data</button>
                        </div>
                    </div>
                </div>

                <!-- System Health Panel -->
                <div class="panel" id="systemPanel">
                    <div class="panel-header">
                        <h2>üìä System Health</h2>
                        <p>Monitor Zoe's performance</p>
                    </div>
                    
                    <div class="system-stats">
                        <div class="stat-card">
                            <div class="stat-icon">ü§ñ</div>
                            <div class="stat-content">
                                <div class="stat-title">AI Status</div>
                                <div class="stat-value">Connected</div>
                                <div class="stat-detail">Ollama: llama2-7b</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üíæ</div>
                            <div class="stat-content">
                                <div class="stat-title">Storage</div>
                                <div class="stat-value">15.2GB Used</div>
                                <div class="stat-detail">112GB Free</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üå°Ô∏è</div>
                            <div class="stat-content">
                                <div class="stat-title">Temperature</div>
                                <div class="stat-value">52¬∞C</div>
                                <div class="stat-detail">Normal</div>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">‚ö°</div>
                            <div class="stat-content">
                                <div class="stat-title">Performance</div>
                                <div class="stat-value">CPU: 23%</div>
                                <div class="stat-detail">RAM: 1.8GB/4GB</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="service-status">
                        <h3>Service Status</h3>
                        <div class="service-list">
                            <div class="service-item">
                                <span>Zoe Core API</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="service-item">
                                <span>Whisper STT</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="service-item">
                                <span>Coqui TTS</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="service-item">
                                <span>Redis Cache</span>
                                <span class="status-dot online"></span>
                            </div>
                            <div class="service-item">
                                <span>Database</span>
                                <span class="status-dot online"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="system-actions">
                        <h3>Maintenance</h3>
                        <div class="action-grid">
                            <button class="action-btn" onclick="restartServices()">üîÑ Restart Services</button>
                            <button class="action-btn" onclick="clearCache()">üóëÔ∏è Clear Cache</button>
                            <button class="action-btn" onclick="updateSystem()">üì• Check Updates</button>
                            <button class="action-btn" onclick="viewLogs()">üìÑ View Logs</button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- Chat Overlay -->
    <div class="overlay" id="chatOverlay">
        <div class="chat-window">
            <div class="chat-header">
                <div class="chat-title">
                    <div class="mini-orb-chat">
                        <div class="fluid-layer"></div>
                    </div>
                    <span>Chat with Zoe</span>
                </div>
                <button class="close-btn" onclick="closeChatWindow()">√ó</button>
            </div>
            
            <div class="chat-messages-overlay" id="chatMessagesOverlay">
                <div class="message assistant">
                    <div class="message-avatar">Z</div>
                    <div class="message-content">Hello! I'm Zoe, your AI companion. What would you like to talk about?</div>
                </div>
            </div>
            
            <div class="chat-input-overlay">
                <div class="chat-input-group">
                    <textarea class="chat-input" id="chatInputOverlay" placeholder="Type your message..." rows="1"></textarea>
                    <button class="voice-btn" onclick="toggleVoiceInOverlay()" title="Voice input">üé§</button>
                    <button class="send-btn" onclick="sendMessageFromOverlay()" title="Send message">‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Shopping List Overlay -->
    <div class="overlay" id="shoppingOverlay">
        <div class="shopping-window">
            <div class="shopping-header">
                <div class="shopping-title">
                    <span>üõí</span>
                    <span>Shopping List</span>
                </div>
                <button class="close-btn" onclick="closeShoppingWindow()">√ó</button>
            </div>
            
            <div class="shopping-content">
                <div class="shopping-input-group">
                    <input type="text" class="shopping-input" id="shoppingInput" placeholder="Add item to list...">
                    <button class="add-item-btn" onclick="addShoppingItem()">Add</button>
                </div>
                
                <div class="shopping-list" id="shoppingList">
                    <div class="shopping-item">
                        <div class="shopping-checkbox" onclick="toggleShoppingItem(this)"></div>
                        <div class="shopping-text">Milk</div>
                        <button class="delete-item-btn" onclick="deleteShoppingItem(this)">√ó</button>
                    </div>
                    <div class="shopping-item">
                        <div class="shopping-checkbox" onclick="toggleShoppingItem(this)"></div>
                        <div class="shopping-text">Bread</div>
                        <button class="delete-item-btn" onclick="deleteShoppingItem(this)">√ó</button>
                    </div>
                    <div class="shopping-item">
                        <div class="shopping-checkbox checked" onclick="toggleShoppingItem(this)"></div>
                        <div class="shopping-text completed">Apples</div>
                        <button class="delete-item-btn" onclick="deleteShoppingItem(this)">√ó</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let isListening = false;
        let currentMode = 'orb';
        let backendConnected = false;
        
        // DOM Elements
        const orbMode = document.getElementById('orbMode');
        const mainInterface = document.getElementById('mainInterface');
        const fluidOrb = document.getElementById('fluidOrb');
        const chatInput = document.getElementById('chatInput');
        const voiceBtn = document.getElementById('voiceBtn');
        const statusIndicator = document.getElementById('statusIndicator');
        const chatMessagesOverlay = document.getElementById('chatMessagesOverlay');

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Zoe v3.1 Interface Loaded');
            updateTime();
            setInterval(updateTime, 1000);
            updateWeather();
            setInterval(updateWeather, 300000); // Every 5 minutes
            checkBackendConnection();
            setInterval(checkBackendConnection, 30000); // Every 30 seconds
            
            showStatus('Interface loaded successfully', 2000);
            
            // Focus chat input when interface is active
            mainInterface.addEventListener('transitionend', function() {
                if (mainInterface.classList.contains('active')) {
                    setTimeout(() => chatInput.focus(), 100);
                }
            });
            
            // Voice activation in orb mode (spacebar)
            document.addEventListener('keydown', function(e) {
                if (currentMode === 'orb' && e.code === 'Space') {
                    e.preventDefault();
                    toggleVoiceFromOrb();
                }
                // ESC to return to orb
                if (e.key === 'Escape' && currentMode === 'interface') {
                    exitToOrb();
                }
            });
            
            // Chat input enter key
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    openChatWindow();
                }
            });

            // Chat overlay interactions
            setupChatOverlayEvents();
            setupShoppingOverlayEvents();
        });

        // Show status messages
        function showStatus(message, duration = 3000) {
            statusIndicator.textContent = message;
            statusIndicator.classList.add('show');
            setTimeout(() => {
                statusIndicator.classList.remove('show');
            }, duration);
        }

        // Check backend connection
        function checkBackendConnection() {
            fetch('/api/health')
                .then(response => {
                    if (response.ok) {
                        backendConnected = true;
                        console.log('‚úÖ Backend connected');
                    } else {
                        backendConnected = false;
                    }
                })
                .catch(error => {
                    backendConnected = false;
                    console.log('‚ö†Ô∏è Backend not available (this is expected in standalone mode)');
                });
        }

        // Mode switching
        function enterInterface() {
            currentMode = 'interface';
            orbMode.classList.add('hidden');
            mainInterface.classList.add('active');
            showStatus('Interface activated');
        }

        function exitToOrb() {
            currentMode = 'orb';
            mainInterface.classList.remove('active');
            orbMode.classList.remove('hidden');
            showStatus('Returned to orb mode');
        }

        // Navigation - Updated to handle panels
        function switchPanel(panel) {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            
            // Hide main dashboard and show panels container
            const mainContainer = document.querySelector('.main-container');
            const panelsContainer = document.getElementById('panelsContainer');
            const panels = document.querySelectorAll('.panel');
            
            if (panel === 'dashboard') {
                // Show main dashboard
                mainContainer.style.display = 'flex';
                panelsContainer.classList.remove('active');
                if (event && event.target) event.target.classList.add('active');
                showStatus('Dashboard');
            } else if (panel === 'shopping') {
                openShoppingWindow();
            } else if (panel === 'settings') {
                // Show settings panel
                mainContainer.style.display = 'none';
                panelsContainer.classList.add('active');
                panels.forEach(p => p.classList.remove('active'));
                document.getElementById('settingsPanel').classList.add('active');
                showStatus('Settings opened');
            } else {
                // Show specific panel
                mainContainer.style.display = 'none';
                panelsContainer.classList.add('active');
                panels.forEach(p => p.classList.remove('active'));
                
                const targetPanel = document.getElementById(panel + 'Panel');
                if (targetPanel) {
                    targetPanel.classList.add('active');
                    if (event && event.target) event.target.classList.add('active');
                    showStatus(`${panel.charAt(0).toUpperCase() + panel.slice(1)} opened`);
                    
                    // Special initialization for calendar
                    if (panel === 'calendar') {
                        generateCalendar();
                    }
                }
            }
        }

        // Journal functions
        function selectMood(moodElement) {
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            moodElement.classList.add('selected');
            showStatus(`Mood selected: ${moodElement.dataset.mood}`);
        }

        function saveJournalEntry() {
            const selectedMood = document.querySelector('.mood-option.selected');
            const entryText = document.getElementById('journalText').value.trim();
            const tags = document.getElementById('journalTags').value.trim();
            
            if (!entryText) {
                showStatus('Please write something in your journal entry');
                return;
            }

            const moodEmoji = {
                'amazing': 'üòÑ',
                'good': 'üòä',
                'okay': 'üòê',
                'stressed': 'üò∞',
                'sad': 'üò¢'
            };

            const mood = selectedMood ? selectedMood.dataset.mood : 'okay';
            const emoji = moodEmoji[mood] || 'üí≠';

            // Create new entry
            const entryDiv = document.createElement('div');
            entryDiv.className = 'entry-item';
            entryDiv.innerHTML = `
                <div class="entry-header">
                    <span class="entry-date">${new Date().toLocaleDateString()}, ${new Date().toLocaleTimeString()}</span>
                    <span class="entry-mood">${emoji}</span>
                </div>
                <p class="entry-text">${entryText}</p>
                ${tags ? `<div class="entry-tags">${tags}</div>` : ''}
            `;

            // Add to history
            const historyContainer = document.querySelector('.journal-history');
            historyContainer.insertBefore(entryDiv, historyContainer.children[1]);

            // Clear form
            document.getElementById('journalText').value = '';
            document.getElementById('journalTags').value = '';
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });

            showStatus('Journal entry saved successfully!');

            // Save to backend if connected
            if (backendConnected) {
                fetch('/api/journal/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        mood: mood,
                        content: entryText,
                        tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag)
                    })
                })
                .catch(error => console.log('Journal API not available'));
            }
        }

        // Task functions
        function addNewTask() {
            const title = document.getElementById('newTaskTitle').value.trim();
            const priority = document.getElementById('taskPriority').value;
            const dueDate = document.getElementById('taskDueDate').value;
            
            if (!title) {
                showStatus('Please enter a task title');
                return;
            }

            const taskDiv = document.createElement('div');
            taskDiv.className = 'task-item-detailed';
            taskDiv.innerHTML = `
                <div class="task-checkbox" onclick="toggleTask(this)"></div>
                <div class="task-content">
                    <div class="task-title">${title}</div>
                    <div class="task-meta">${dueDate ? `Due: ${new Date(dueDate).toLocaleDateString()}` : 'No due date'} ‚Ä¢ ${priority.charAt(0).toUpperCase() + priority.slice(1)} Priority</div>
                </div>
            `;

            document.getElementById('allTasksList').appendChild(taskDiv);

            // Clear form
            document.getElementById('newTaskTitle').value = '';
            document.getElementById('taskDueDate').value = '';

            showStatus(`Task "${title}" added successfully!`);

            // Save to backend if connected
            if (backendConnected) {
                fetch('/api/tasks/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: title,
                        priority: priority,
                        due_date: dueDate || null
                    })
                })
                .catch(error => console.log('Tasks API not available'));
            }
        }

        function filterTasks(filter) {
            const filterBtns = document.querySelectorAll('.filter-btn');
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const tasks = document.querySelectorAll('.task-item-detailed');
            tasks.forEach(task => {
                const isCompleted = task.querySelector('.task-checkbox').classList.contains('checked');
                const isHigh = task.querySelector('.task-meta').textContent.includes('High Priority');

                switch(filter) {
                    case 'all':
                        task.style.display = 'flex';
                        break;
                    case 'pending':
                        task.style.display = isCompleted ? 'none' : 'flex';
                        break;
                    case 'completed':
                        task.style.display = isCompleted ? 'flex' : 'none';
                        break;
                    case 'high':
                        task.style.display = isHigh ? 'flex' : 'none';
                        break;
                }
            });

            showStatus(`Showing ${filter} tasks`);
        }

        // Calendar functions
        let currentDate = new Date();

        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthTitle = document.getElementById('currentMonth');
            
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            monthTitle.textContent = new Date(year, month).toLocaleDateString('en-US', { 
                month: 'long', 
                year: 'numeric' 
            });
            
            // Clear existing calendar
            grid.innerHTML = '';
            
            // Add day headers
            const dayHeaders = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayHeaders.forEach(day => {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.style.fontWeight = 'bold';
                dayDiv.style.background = 'rgba(123, 97, 255, 0.1)';
                dayDiv.textContent = day;
                grid.appendChild(dayDiv);
            });
            
            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();
            
            // Add previous month's trailing days
            for (let i = firstDay - 1; i >= 0; i--) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = daysInPrevMonth - i;
                grid.appendChild(dayDiv);
            }
            
            // Add current month's days
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.textContent = day;
                
                // Mark today
                if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                    dayDiv.classList.add('today');
                }
                
                // Mark days with events (sample)
                if ([5, 12, 20, 25].includes(day)) {
                    dayDiv.classList.add('has-event');
                }
                
                dayDiv.addEventListener('click', () => {
                    document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
                    dayDiv.classList.add('selected');
                    showStatus(`Selected ${monthTitle.textContent} ${day}`);
                });
                
                grid.appendChild(dayDiv);
            }
            
            // Add next month's leading days
            const totalCells = grid.children.length;
            const remainingCells = 42 - totalCells; // 6 rows √ó 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = day;
                grid.appendChild(dayDiv);
            }
        }

        function previousMonth() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
            showStatus('Previous month');
        }

        function nextMonth() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
            showStatus('Next month');
        }

        function addNewEvent() {
            const title = document.getElementById('eventTitle').value.trim();
            const date = document.getElementById('eventDate').value;
            const time = document.getElementById('eventTime').value;
            const description = document.getElementById('eventDescription').value.trim();
            
            if (!title || !date) {
                showStatus('Please enter event title and date');
                return;
            }

            // Clear form
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDate').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventDescription').value = '';

            showStatus(`Event "${title}" scheduled for ${new Date(date).toLocaleDateString()}`);

            // Save to backend if connected
            if (backendConnected) {
                fetch('/api/events/create', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        title: title,
                        date: date,
                        time: time || null,
                        description: description || null
                    })
                })
                .catch(error => console.log('Events API not available'));
            }
        }

        // Settings functions
        function updatePersonality(type, value) {
            document.getElementById(type + 'Value').textContent = value;
            showStatus(`${type.charAt(0).toUpperCase() + type.slice(1)} level set to ${value}/10`);

            // Save to backend if connected
            if (backendConnected) {
                fetch('/api/settings/personality', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        [type]: parseInt(value)
                    })
                })
                .catch(error => console.log('Settings API not available'));
            }
        }

        function testVoice() {
            showStatus('Testing voice synthesis...');
            
            // Simulate TTS
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance("Hello! This is how I sound when speaking aloud!");
                utterance.rate = 0.9;
                utterance.pitch = 1.1;
                speechSynthesis.speak(utterance);
            } else {
                showStatus('Voice synthesis not supported in this browser');
            }
        }

        function exportData() {
            showStatus('Preparing data export...');
            setTimeout(() => {
                showStatus('Data export ready! (Demo mode)');
            }, 2000);
        }

        function backupData() {
            showStatus('Creating backup...');
            setTimeout(() => {
                showStatus('Backup completed successfully!');
            }, 1500);
        }

        function clearData() {
            if (confirm('Are you sure you want to clear all data? This cannot be undone.')) {
                showStatus('All data cleared successfully!');
            }
        }

        // System functions
        function restartServices() {
            showStatus('Restarting services...');
            setTimeout(() => {
                showStatus('All services restarted successfully!');
            }, 2000);
        }

        function clearCache() {
            showStatus('Clearing cache...');
            setTimeout(() => {
                showStatus('Cache cleared successfully!');
            }, 1000);
        }

        function updateSystem() {
            showStatus('Checking for updates...');
            setTimeout(() => {
                showStatus('System is up to date!');
            }, 2000);
        }

        function viewLogs() {
            showStatus('Opening system logs...');
            console.log('System logs would be displayed here');
        }

        // Time and Date
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            const dateString = now.toLocaleDateString('en-US', {
                weekday: 'long',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('currentDate').textContent = dateString;
        }

        // Weather
        function updateWeather() {
            if (backendConnected) {
                fetch('/api/weather')
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('weatherIcon').textContent = getWeatherIcon(data.condition || 'sunny');
                        document.getElementById('weatherTemp').textContent = `${data.temperature || 23}¬∞`;
                    })
                    .catch(error => {
                        console.log('Weather API not available, using defaults');
                        setDefaultWeather();
                    });
            } else {
                setDefaultWeather();
            }
        }

        function setDefaultWeather() {
            document.getElementById('weatherIcon').textContent = getWeatherIcon('sunny');
            document.getElementById('weatherTemp').textContent = '23¬∞';
        }

        function getWeatherIcon(condition) {
            const weatherIcons = {
                'sunny': '‚òÄÔ∏è',
                'clear': '‚òÄÔ∏è',
                'partly-cloudy': '‚õÖ',
                'cloudy': '‚òÅÔ∏è',
                'rain': 'üåßÔ∏è',
                'thunderstorm': '‚õàÔ∏è',
                'snow': '‚ùÑÔ∏è',
                'fog': 'üå´Ô∏è'
            };
            return weatherIcons[condition.toLowerCase()] || 'üå§Ô∏è';
        }

        // Voice functionality
        function toggleVoice() {
            isListening = !isListening;
            
            if (isListening) {
                startListening();
            } else {
                stopListening();
            }
        }

        function toggleVoiceFromOrb() {
            isListening = !isListening;
            
            if (isListening) {
                fluidOrb.className = 'fluid-orb listening';
                startListening();
                showStatus('Listening...');
            } else {
                fluidOrb.className = 'fluid-orb idle';
                stopListening();
                showStatus('Stopped listening');
            }
        }

        function startListening() {
            voiceBtn.classList.add('active');
            
            if (backendConnected) {
                fetch('/api/voice/start', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Voice recording started');
                    showStatus('Listening for voice input...');
                })
                .catch(error => {
                    console.log('Voice API not available');
                    showStatus('Voice recording started (demo mode)');
                });
            } else {
                console.log('Voice recording started (standalone mode)');
                showStatus('Voice recording started (demo mode)');
            }
        }

        function stopListening() {
            voiceBtn.classList.remove('active');
            
            if (backendConnected) {
                fetch('/api/voice/stop', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.transcription) {
                        chatInput.value = data.transcription;
                        openChatWindow();
                    }
                })
                .catch(error => {
                    console.log('Voice API not available');
                    setTimeout(() => {
                        chatInput.value = "Hello Zoe, this is a voice input demo";
                        showStatus('Voice input received (demo)');
                    }, 1000);
                });
            } else {
                setTimeout(() => {
                    const demoInputs = [
                        "Hello Zoe, how are you today?",
                        "What's the weather like?",
                        "Add a new task for me",
                        "Tell me about my schedule"
                    ];
                    const randomInput = demoInputs[Math.floor(Math.random() * demoInputs.length)];
                    chatInput.value = randomInput;
                    showStatus('Voice input received (demo mode)');
                }, 1000);
            }
        }

        // Chat overlay functions
        function openChatWindow() {
            const chatOverlay = document.getElementById('chatOverlay');
            chatOverlay.classList.add('active');
            
            setTimeout(() => {
                document.getElementById('chatInputOverlay').focus();
            }, 300);
            
            showStatus('Chat opened');
        }

        function closeChatWindow() {
            const chatOverlay = document.getElementById('chatOverlay');
            chatOverlay.classList.remove('active');
            showStatus('Chat closed');
        }

        function sendMessageFromOverlay() {
            const input = document.getElementById('chatInputOverlay');
            const message = input.value.trim();
            if (!message) return;

            addMessageToOverlay(message, 'user');
            input.value = '';

            showTypingIndicatorInOverlay();

            if (backendConnected) {
                fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        message: message,
                        context: {
                            mode: currentMode,
                            timestamp: new Date().toISOString()
                        }
                    })
                })
                .then(response => response.json())
                .then(data => {
                    hideTypingIndicatorInOverlay();
                    addMessageToOverlay(data.response, 'assistant');
                })
                .catch(error => {
                    console.error('Chat error:', error);
                    hideTypingIndicatorInOverlay();
                    addMessageToOverlay('I\'m having trouble connecting right now. But I\'m here and ready to chat in demo mode!', 'assistant');
                });
            } else {
                setTimeout(() => {
                    hideTypingIndicatorInOverlay();
                    const demoResponse = generateDemoResponse(message);
                    addMessageToOverlay(demoResponse, 'assistant');
                }, 1500);
            }
        }

        function addMessageToOverlay(content, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = sender === 'user' ? 'Y' : 'Z';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            messageContent.textContent = content;
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            chatMessagesOverlay.appendChild(messageDiv);
            chatMessagesOverlay.scrollTop = chatMessagesOverlay.scrollHeight;
        }

        function showTypingIndicatorInOverlay() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message assistant typing';
            typingDiv.id = 'typingIndicatorOverlay';
            
            const avatar = document.createElement('div');
            avatar.className = 'message-avatar';
            avatar.textContent = 'Z';
            
            const indicator = document.createElement('div');
            indicator.className = 'typing-indicator';
            indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
            
            typingDiv.appendChild(avatar);
            typingDiv.appendChild(indicator);
            
            chatMessagesOverlay.appendChild(typingDiv);
            chatMessagesOverlay.scrollTop = chatMessagesOverlay.scrollHeight;
        }

        function hideTypingIndicatorInOverlay() {
            const typingIndicator = document.getElementById('typingIndicatorOverlay');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function toggleVoiceInOverlay() {
            isListening = !isListening;
            
            if (isListening) {
                startListening();
            } else {
                stopListening();
            }
        }

        // Shopping list functionality
        function openShoppingWindow() {
            const shoppingOverlay = document.getElementById('shoppingOverlay');
            shoppingOverlay.classList.add('active');
            
            setTimeout(() => {
                document.getElementById('shoppingInput').focus();
            }, 300);
            
            showStatus('Shopping list opened');
        }

        function closeShoppingWindow() {
            const shoppingOverlay = document.getElementById('shoppingOverlay');
            shoppingOverlay.classList.remove('active');
            showStatus('Shopping list closed');
        }

        function addShoppingItem() {
            const input = document.getElementById('shoppingInput');
            const itemText = input.value.trim();
            if (!itemText) return;

            const shoppingList = document.getElementById('shoppingList');
            const itemDiv = document.createElement('div');
            itemDiv.className = 'shopping-item';
            
            itemDiv.innerHTML = `
                <div class="shopping-checkbox" onclick="toggleShoppingItem(this)"></div>
                <div class="shopping-text">${itemText}</div>
                <button class="delete-item-btn" onclick="deleteShoppingItem(this)">√ó</button>
            `;
            
            shoppingList.appendChild(itemDiv);
            input.value = '';
            
            showStatus(`Added "${itemText}" to shopping list`);
            
            if (backendConnected) {
                fetch('/api/shopping/add', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ item: itemText })
                })
                .catch(error => console.log('Shopping API not available'));
            }
        }

        function toggleShoppingItem(checkbox) {
            const item = checkbox.parentElement;
            const text = item.querySelector('.shopping-text');
            
            checkbox.classList.toggle('checked');
            text.classList.toggle('completed');
            
            const isCompleted = checkbox.classList.contains('checked');
            const itemText = text.textContent;
            
            showStatus(`${isCompleted ? 'Checked off' : 'Unchecked'}: ${itemText}`);
            
            if (backendConnected) {
                fetch('/api/shopping/update', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        item: itemText,
                        completed: isCompleted
                    })
                })
                .catch(error => console.log('Shopping update not synced'));
            }
        }

        function deleteShoppingItem(button) {
            const item = button.parentElement;
            const itemText = item.querySelector('.shopping-text').textContent;
            
            item.remove();
            showStatus(`Deleted "${itemText}" from shopping list`);
            
            if (backendConnected) {
                fetch('/api/shopping/delete', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ item: itemText })
                })
                .catch(error => console.log('Shopping delete not synced'));
            }
        }

        // Quick actions
        function quickAction(action) {
            switch(action) {
                case 'journal':
                    openChatWindow();
                    setTimeout(() => {
                        addMessageToOverlay('Let\'s create a journal entry! What\'s on your mind today? You can write about your thoughts, experiences, or anything you\'d like to remember.', 'assistant');
                    }, 500);
                    showStatus('Ready to create journal entry');
                    break;
                    
                case 'event':
                    openChatWindow();
                    setTimeout(() => {
                        document.getElementById('chatInputOverlay').value = 'Schedule an event: ';
                        document.getElementById('chatInputOverlay').focus();
                    }, 300);
                    showStatus('Ready to schedule an event');
                    break;
                    
                case 'task':
                    openChatWindow();
                    setTimeout(() => {
                        document.getElementById('chatInputOverlay').value = 'Create a new task: ';
                        document.getElementById('chatInputOverlay').focus();
                    }, 300);
                    showStatus('Ready to add a new task');
                    break;

                case 'shopping':
                    openShoppingWindow();
                    break;
            }
        }

        // Task management
        function toggleTask(checkbox) {
            const taskItem = checkbox.parentElement;
            const taskText = taskItem.querySelector('.task-text');
            
            checkbox.classList.toggle('checked');
            taskText.classList.toggle('completed');
            
            const isCompleted = checkbox.classList.contains('checked');
            const taskContent = taskText.textContent;
            
            showStatus(`Task ${isCompleted ? 'completed' : 'unchecked'}: ${taskContent}`);
            
            if (backendConnected) {
                const taskId = taskItem.dataset.taskId || Math.random().toString(36).substr(2, 9);
                fetch('/api/tasks/update', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        task_id: taskId,
                        completed: isCompleted
                    })
                })
                .catch(error => {
                    console.log('Task update not synced (demo mode)');
                });
            }
        }

        // Demo response generator
        function generateDemoResponse(message) {
            const responses = [
                "That's interesting! I'm running in demo mode right now, but I can see your message clearly.",
                "I'd love to help with that! Once my backend is connected, I'll have access to all my smart features.",
                "Great question! I'm Zoe, your AI companion. Right now I'm showing you the beautiful interface we've built together.",
                "I can see the interface is working perfectly! The orb animations, chat system, and all the UI elements are functioning beautifully.",
                "This new v3.1 interface is pretty amazing, isn't it? Glass morphic design, fluid animations, and touch-optimized for your Pi!",
                "I'm excited to be fully connected soon! Then I can help with tasks, journal entries, weather updates, and so much more."
            ];
            
            const lowerMessage = message.toLowerCase();
            if (lowerMessage.includes('weather')) {
                return "I can see the weather widget is working! Once connected to a weather API, I'll give you live updates.";
            } else if (lowerMessage.includes('task')) {
                return "I'd love to help you manage tasks! You can see the task list on the dashboard, and soon I'll be able to add and update them dynamically.";
            } else if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! Welcome to Zoe v3.1! I'm so excited you can see the new interface. Isn't it beautiful?";
            } else if (lowerMessage.includes('interface') || lowerMessage.includes('design')) {
                return "I love this new interface too! The fluid orb, glass morphic design, and smooth animations make me feel so elegant.";
            }
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Event listeners setup
        function setupChatOverlayEvents() {
            const chatInputOverlay = document.getElementById('chatInputOverlay');
            if (chatInputOverlay) {
                chatInputOverlay.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendMessageFromOverlay();
                    }
                });
            }
            
            document.getElementById('chatOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeChatWindow();
                }
            });
        }

        function setupShoppingOverlayEvents() {
            const shoppingInput = document.getElementById('shoppingInput');
            if (shoppingInput) {
                shoppingInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        addShoppingItem();
                    }
                });
            }
            
            document.getElementById('shoppingOverlay').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeShoppingWindow();
                }
            });
        }

        // Auto-return to orb mode after inactivity
        let inactivityTimer;
        const INACTIVITY_TIMEOUT = 300000; // 5 minutes

        function resetInactivityTimer() {
            clearTimeout(inactivityTimer);
            if (currentMode === 'interface') {
                inactivityTimer = setTimeout(() => {
                    exitToOrb();
                    showStatus('Returned to orb mode due to inactivity');
                }, INACTIVITY_TIMEOUT);
            }
        }

        // Track user activity
        ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart'].forEach(event => {
            document.addEventListener(event, resetInactivityTimer, true);
        });

        // Console welcome message
        console.log(`
üåü Zoe v3.1 Interface Loaded Successfully!

‚ú® Features Active:
   ‚Ä¢ Fluid orb animations with 3 states
   ‚Ä¢ Glass morphic design system
   ‚Ä¢ Touch-optimized for Pi deployment
   ‚Ä¢ Real-time clock and weather
   ‚Ä¢ Interactive chat interface
   ‚Ä¢ Task and event management
   ‚Ä¢ Voice input ready (spacebar in orb mode)
   ‚Ä¢ Backend integration ready

üéØ Status: ${backendConnected ? 'Connected to backend' : 'Standalone demo mode'}

üí° Try:
   ‚Ä¢ Click the orb to enter interface
   ‚Ä¢ Press spacebar for voice input
   ‚Ä¢ Type messages in chat
   ‚Ä¢ Toggle tasks and try quick actions
   ‚Ä¢ Use ESC to return to orb mode

üîó API Endpoints Ready:
   ‚Ä¢ /api/chat - Chat with Zoe
   ‚Ä¢ /api/voice/start & /api/voice/stop - Voice services
   ‚Ä¢ /api/tasks/today & /api/tasks/update - Task management
   ‚Ä¢ /api/events/upcoming - Calendar events
   ‚Ä¢ /api/journal/create - Journal entries
   ‚Ä¢ /api/weather - Weather data
   ‚Ä¢ /api/health - Service health check

Built with ‚ù§Ô∏è for your Raspberry Pi touchscreen!
        `);
    </script>
</body>
</html>